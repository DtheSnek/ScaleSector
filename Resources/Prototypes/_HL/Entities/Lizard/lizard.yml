- type: entity
  id: HL_LizardHead
  parent: BaseMobCarp
  name: lizard head
  abstract: true
  components:
  - type: Sprite
    sprite: _HL/Lizard/lizard.rsi
    state: lizardheadclosed
  # - type: TrailLeader
  - type: DamageStateVisuals
    states:
      Alive:
        Base: lizardheadclosed
      Critical:
        Base: critlizardhead
      Dead:
        Base: deadlizardhead


# - type: entity
  # id: HL_LizardBody
  # abstract: true
  # name: lizard body
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # state: segment
  # - type: TrailLeader
  # - type: TrailFollower
    # delay: 1
    # smoothFactor: 0.65
    # rotationOffsetDeg: -90

# - type: entity
  # id: HL_LizardBody2
  # abstract: true
  # name: lizard ass
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # state: segment
  # - type: TrailLeader
  # - type: TrailFollower
    # delay: 1
    # smoothFactor: 0.70
    # rotationOffsetDeg: -90

# - type: entity
  # id: HL_LizardTailTip
  # abstract: true
  # name: lizard tail tip
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # state: tip
  # - type: TrailFollower
    # delay: 1
    # smoothFactor: 0.70
    # rotationOffsetDeg: -90

- type: entity
  id: BlueRainLizard
  parent: HL_LizardHead
  name: Blue Rain Lizard
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: _HL/Lizard/lizard.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: lizardheadclosed
      scale: 0.6, 0.6
      color: "#3363ac"
      shader: unshaded
  - type: Fixtures
    fixtures: # TODO: This needs a second fixture just for mob collisions.
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 1000 #Density is not final, adjust accordingly if the number of tail segments is reduced or increased
        restitution: 0.0
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: SegmentedEntity
    numberOfSegments: 3
    staticOffset: 0.35
    staticScale: 0.6
    useTaperSystem: true
    taperOffset: 3
    texturePath: /Textures/_HL/Lizard/lizard.rsi/segment.png
    shaderId: unshaded
# - type: entity
  # id: BlueRainLizardBody
  # parent: HL_LizardBody
  # name: Blue Rain Lizard Body
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 0.6, 0.6
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: segment
  # - type: TrailFollower
    # delay: 2
    # smoothFactor: 0.30
    # rotationOffsetDeg: -90   

# - type: entity
  # id: BlueRainLizardBody2
  # parent: HL_LizardBody2
  # name: Blue Rain Lizard Ass
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 0.6, 0.6
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: segment      
  # - type: TrailFollower
    # delay: 3
    # smoothFactor: 0.60
    # rotationOffsetDeg: -90

# - type: entity
  # id: BlueRainLizardTail
  # parent: HL_LizardTailTip
  # name: Blue Rain Lizard Tail
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 0.6, 0.6
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: tip 
  # - type: TrailFollower
    # delay: 4
    # smoothFactor: 0.60
    # rotationOffsetDeg: -90

- type: entity
  id: RedRainLizard
  parent: HL_LizardHead
  name: Red Rain Lizard
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: _HL/Lizard/lizard.rsi
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: lizardheadclosed
      scale: 1.2, 1.2
      color: "#d30f0f"
      shader: unshaded
  - type: SegmentedEntity
    numberOfSegments: 3
    initialRadius: 0.8
    staticOffset: 1
    staticScale: 1.2
    initialSegmentId: RedRainLizardInitialSegment
    segmentId: RedRainLizardSegment
    useTaperSystem: true
    taperOffset: 3
    texturePath: /Textures/_HL/Lizard/lizard.rsi/segment.png
    shaderId: unshaded
    
# - type: entity
  # id: RedRainLizardBody
  # parent: HL_LizardBody
  # name: Red Rain Lizard Body
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 1.2, 1.2
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: segment
    # - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      # state: fronttassle
      # color: "#d30f0f"
      # shader: unshaded
  # - type: TrailFollower
    # delay: 2
    # smoothFactor: 0.30
    # rotationOffsetDeg: -90    

# - type: entity
  # id: RedRainLizardBody2
  # parent: HL_LizardBody2
  # name: Red Rain Lizard Ass
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 1.2, 1.2
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: segment      
    # - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      # state: backtassle
      # color: "#d30f0f"
      # shader: unshaded
  # - type: TrailFollower
    # delay: 8
    # smoothFactor: 0.70
    # rotationOffsetDeg: -90

# - type: entity
  # id: RedRainLizardTail
  # parent: HL_LizardTailTip
  # name: Red Rain Lizard Tail
  # categories: [ HideSpawnMenu ]
  # components:
  # - type: Sprite
    # sprite: _HL/Lizard/lizard.rsi
    # scale: 1.2, 1.2
    # layers:
    # - map: [ "enum.DamageStateVisualLayers.Base" ]
      # state: tip 
    # - map: [ "enum.DamageStateVisualLayers.BaseUnshaded" ]
      # state: tailtassle
      # color: "#d30f0f"
      # shader: unshaded
  # - type: TrailFollower
    # delay: 8
    # smoothFactor: 0.70
    # rotationOffsetDeg: -90